(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{595:function(s,n,e){"use strict";e.r(n);var a=e(14),t=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("###今日目标\n1.完成项目优化\n2.完成项目上线")]),s._v(" "),n("p",[s._v("###1.项目优化\n实现步骤：\nA.生成打包报告，根据报告优化项目\nB.第三方库启用CDN\nC.Element-UI组件按需加载\nD.路由懒加载\nE.首页内容定制")]),s._v(" "),n("p",[s._v("###2.添加进度条\n给项目添加进度条效果，先打开项目控制台，打开依赖，安装nprogress\n打开main.js，编写如下代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//导入进度条插件\nimport NProgress from 'nprogress'\n//导入进度条样式\nimport 'nprogress/nprogress.css'\n.....\n//请求在到达服务器之前，先会调用use中的这个回调函数来添加请求头信息\naxios.interceptors.request.use(config => {\n  //当进入request拦截器，表示发送了请求，我们就开启进度条\n  NProgress.start()\n  //为请求头对象，添加token验证的Authorization字段\n  config.headers.Authorization = window.sessionStorage.getItem(\"token\")\n  //必须返回config\n  return config\n})\n//在response拦截器中，隐藏进度条\naxios.interceptors.response.use(config =>{\n  //当进入response拦截器，表示请求已经结束，我们就结束进度条\n  NProgress.done()\n  return config\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v('###3.根据报错修改代码\n根据ESLint的警告提示更改对应的代码\n在.prettierrc文件中更改设置"printWidth":200,  将每行代码的文字数量更改为200')]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "semi":false,\n    "singleQuote":true,\n    "printWidth":200\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("###4.执行build\n安装一个插件（babel-plugin-transform-remove-console）在项目build阶段移除所有的console信息\n打开项目控制台，点击依赖->开发依赖，输入babel-plugin-transform-remove-console，安装\n打开babel.config.js，编辑代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('//项目发布阶段需要用到的babel插件\nconst productPlugins = []\n\n//判断是开发还是发布阶段\nif(process.env.NODE_ENV === \'production\'){\n  //发布阶段\n  productPlugins.push("transform-remove-console")\n}\n\nmodule.exports = {\n  "presets": [\n    "@vue/app"\n  ],\n  "plugins": [\n    [\n      "component",\n      {\n        "libraryName": "element-ui",\n        "styleLibraryName": "theme-chalk"\n      }\n    ],\n    ...productPlugins\n  ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("###5.生成打包报告\nA.命令行形式生成打包报告\nvue-cli-service build --report\nB.在vue控制台生成打包报告\n点击“任务”=>“build”=>“运行”\n运行完毕之后点击右侧“分析”，“控制台”面板查看报告")]),s._v(" "),n("p",[s._v("###6.修改webpack的默认配置\n默认情况下，vue-cli 3.0生成的项目，隐藏了webpack配置项，如果我们需要配置webpack\n需要通过vue.config.js来配置。\n在项目根目录中创建vue.config.js文件，")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("module.exports = {\n    chainWebpack:config=>{\n        //发布模式\n        config.when(process.env.NODE_ENV === 'production',config=>{\n            //entry找到默认的打包入口，调用clear则是删除默认的打包入口\n            //add添加新的打包入口\n            config.entry('app').clear().add('./src/main-prod.js')\n        })\n        //开发模式\n        config.when(process.env.NODE_ENV === 'development',config=>{\n            config.entry('app').clear().add('./src/main-dev.js')\n        })\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("补充：\nchainWebpack可以通过链式编程的形式，修改webpack配置\nconfigureWebpack可以通过操作对象的形式，修改webpack配置")]),s._v(" "),n("p",[s._v("###7.加载外部CDN\n默认情况下，依赖项的所有第三方包都会被打包到js/chunk-vendors.******.js文件中，导致该js文件过大\n那么我们可以通过externals排除这些包，使它们不被打包到js/chunk-vendors.******.js文件中")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("module.exports = {\n    chainWebpack:config=>{\n        //发布模式\n        config.when(process.env.NODE_ENV === 'production',config=>{\n            //entry找到默认的打包入口，调用clear则是删除默认的打包入口\n            //add添加新的打包入口\n            config.entry('app').clear().add('./src/main-prod.js')\n\n            //使用externals设置排除项\n            config.set('externals',{\n                vue:'Vue',\n                'vue-router':'VueRouter',\n                axios:'axios',\n                lodash:'_',\n                echarts:'echarts',\n                nprogress:'NProgress',\n                'vue-quill-editor':'VueQuillEditor'\n            })\n        })\n        //开发模式\n        config.when(process.env.NODE_ENV === 'development',config=>{\n            config.entry('app').clear().add('./src/main-dev.js')\n        })\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("设置好排除之后，为了使我们可以使用vue，axios等内容，我们需要加载外部CDN的形式解决引入依赖项。\n打开开发入口文件main-prod.js,删除掉默认的引入代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n// import './plugins/element.js'\n//导入字体图标\nimport './assets/fonts/iconfont.css'\n//导入全局样式\nimport './assets/css/global.css'\n//导入第三方组件vue-table-with-tree-grid\nimport TreeTable from 'vue-table-with-tree-grid'\n//导入进度条插件\nimport NProgress from 'nprogress'\n//导入进度条样式\n// import 'nprogress/nprogress.css'\n// //导入axios\nimport axios from 'axios'\n// //导入vue-quill-editor（富文本编辑器）\nimport VueQuillEditor from 'vue-quill-editor'\n// //导入vue-quill-editor的样式\n// import 'quill/dist/quill.core.css'\n// import 'quill/dist/quill.snow.css'\n// import 'quill/dist/quill.bubble.css'\n\naxios.defaults.baseURL = 'http://127.0.0.1:8888/api/private/v1/'\n//请求在到达服务器之前，先会调用use中的这个回调函数来添加请求头信息\naxios.interceptors.request.use(config => {\n  //当进入request拦截器，表示发送了请求，我们就开启进度条\n  NProgress.start()\n  //为请求头对象，添加token验证的Authorization字段\n  config.headers.Authorization = window.sessionStorage.getItem(\"token\")\n  //必须返回config\n  return config\n})\n//在response拦截器中，隐藏进度条\naxios.interceptors.response.use(config =>{\n  //当进入response拦截器，表示请求已经结束，我们就结束进度条\n  NProgress.done()\n  return config\n})\nVue.prototype.$http = axios\n\nVue.config.productionTip = false\n\n//全局注册组件\nVue.component('tree-table', TreeTable)\n//全局注册富文本组件\nVue.use(VueQuillEditor)\n\n//创建过滤器将秒数过滤为年月日，时分秒\nVue.filter('dateFormat',function(originVal){\n  const dt = new Date(originVal)\n  const y = dt.getFullYear()\n  const m = (dt.getMonth()+1+'').padStart(2,'0')\n  const d = (dt.getDate()+'').padStart(2,'0')\n\n  const hh = (dt.getHours()+'').padStart(2,'0')\n  const mm = (dt.getMinutes()+'').padStart(2,'0')\n  const ss = (dt.getSeconds()+'').padStart(2,'0')\n\n  return `${y}-${m}-${d} ${hh}:${mm}:${ss}`\n})\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br")])]),n("p",[s._v("然后打开public/index.html添加外部cdn引入代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width,initial-scale=1.0">\n    <link rel="icon" href="<%= BASE_URL %>favicon.ico">\n    <title>电商后台管理系统</title>\n\n    \x3c!-- nprogress 的样式表文件 --\x3e\n    <link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />\n    \x3c!-- 富文本编辑器 的样式表文件 --\x3e\n    <link rel="stylesheet" href="https://cdn.staticfile.org/quill/1.3.4/quill.core.min.css" />\n    <link rel="stylesheet" href="https://cdn.staticfile.org/quill/1.3.4/quill.snow.min.css" />\n    <link rel="stylesheet" href="https://cdn.staticfile.org/quill/1.3.4/quill.bubble.min.css" />\n    \x3c!-- element-ui 的样式表文件 --\x3e\n    <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.8.2/theme-chalk/index.css" />\n\n    <script src="https://cdn.staticfile.org/vue/2.5.22/vue.min.js"><\/script>\n    <script src="https://cdn.staticfile.org/vue-router/3.0.1/vue-router.min.js"><\/script>\n    <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"><\/script>\n    <script src="https://cdn.staticfile.org/lodash.js/4.17.11/lodash.min.js"><\/script>\n    <script src="https://cdn.staticfile.org/echarts/4.1.0/echarts.min.js"><\/script>\n    <script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"><\/script>\n    \x3c!-- 富文本编辑器的 js 文件 --\x3e\n    <script src="https://cdn.staticfile.org/quill/1.3.4/quill.min.js"><\/script>\n    <script src="https://cdn.jsdelivr.net/npm/vue-quill-editor@3.0.4/dist/vue-quill-editor.js"><\/script>\n\n    \x3c!-- element-ui 的 js 文件 --\x3e\n    <script src="https://cdn.staticfile.org/element-ui/2.8.2/index.js"><\/script>\n\n  </head>\n  <body>\n    <noscript>\n      <strong>We\'re sorry but vue_shop doesn\'t work properly without JavaScript enabled. Please enable it to continue.</strong>\n    </noscript>\n    <div id="app"></div>\n    \x3c!-- built files will be auto injected --\x3e\n  </body>\n</html>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("p",[s._v("###8.定制首页内容\n开发环境的首页和发布环境的首页展示内容的形式有所不同\n如开发环境中使用的是import加载第三方包，而发布环境则是使用CDN，那么首页也需根据环境不同来进行不同的实现\n我们可以通过插件的方式来定制首页内容，打开vue.config.js，编写代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("module.exports = {\n    chainWebpack:config=>{\n        config.when(process.env.NODE_ENV === 'production',config=>{\n            ......\n            \n            //使用插件\n            config.plugin('html').tap(args=>{\n                //添加参数isProd\n                args[0].isProd = true\n                return args\n            })\n        })\n\n        config.when(process.env.NODE_ENV === 'development',config=>{\n            config.entry('app').clear().add('./src/main-dev.js')\n\n            //使用插件\n            config.plugin('html').tap(args=>{\n                //添加参数isProd\n                args[0].isProd = false\n                return args\n            })\n        })\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("然后在public/index.html中使用插件判断是否为发布环境并定制首页内容")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width,initial-scale=1.0">\n    <link rel="icon" href="<%= BASE_URL %>favicon.ico">\n    <title><%= htmlWebpackPlugin.options.isProd ? \'\' : \'dev - \' %>电商后台管理系统</title>\n\n    <% if(htmlWebpackPlugin.options.isProd){ %>\n    \x3c!-- nprogress 的样式表文件 --\x3e\n    <link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />\n    ........\n    \x3c!-- element-ui 的 js 文件 --\x3e\n    <script src="https://cdn.staticfile.org/element-ui/2.8.2/index.js"><\/script>\n    <% } %>\n  </head>\n  .......\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("###9.路由懒加载\n当路由被访问时才加载对应的路由文件，就是路由懒加载。\n路由懒加载实现步骤：\n1.安装 @babel/plugin-syntax-dynamic-import\n打开vue控制台，点击依赖->安装依赖->开发依赖->搜索@babel/plugin-syntax-dynamic-import\n点击安装。")]),s._v(" "),n("p",[s._v("2.在babel.config.js中声明该插件，打开babel.config.js")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('//项目发布阶段需要用到的babel插件\nconst productPlugins = []\n\n//判断是开发还是发布阶段\nif(process.env.NODE_ENV === \'production\'){\n  //发布阶段\n  productPlugins.push("transform-remove-console")\n}\n\nmodule.exports = {\n  "presets": [\n    "@vue/app"\n  ],\n  "plugins": [\n    [\n      "component",\n      {\n        "libraryName": "element-ui",\n        "styleLibraryName": "theme-chalk"\n      }\n    ],\n    ...productPlugins,\n    //配置路由懒加载插件\n    "@babel/plugin-syntax-dynamic-import"\n  ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("3.将路由更改为按需加载的形式，打开router.js，更改引入组件代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import Vue from 'vue'\nimport Router from 'vue-router'\nconst Login = () => import(/* webpackChunkName:\"login_home_welcome\" */ './components/Login.vue')\n// import Login from './components/Login.vue'\nconst Home = () => import(/* webpackChunkName:\"login_home_welcome\" */ './components/Home.vue')\n// import Home from './components/Home.vue'\nconst Welcome = () => import(/* webpackChunkName:\"login_home_welcome\" */ './components/Welcome.vue')\n// import Welcome from './components/Welcome.vue'\nconst Users = () => import(/* webpackChunkName:\"user\" */ './components/user/Users.vue')\n// import Users from './components/user/Users.vue'\nconst Rights = () => import(/* webpackChunkName:\"power\" */ './components/power/Rights.vue')\n// import Rights from './components/power/Rights.vue'\nconst Roles = () => import(/* webpackChunkName:\"power\" */ './components/power/Roles.vue')\n// import Roles from './components/power/Roles.vue'\nconst Cate = () => import(/* webpackChunkName:\"goods\" */ './components/goods/Cate.vue')\n// import Cate from './components/goods/Cate.vue'\nconst Params = () => import(/* webpackChunkName:\"goods\" */ './components/goods/Params.vue')\n// import Params from './components/goods/Params.vue'\nconst GoodList = () => import(/* webpackChunkName:\"goods\" */ './components/goods/List.vue')\n// import GoodList from './components/goods/List.vue'\nconst GoodAdd = () => import(/* webpackChunkName:\"goods\" */ './components/goods/Add.vue')\n// import GoodAdd from './components/goods/Add.vue'\nconst Order = () => import(/* webpackChunkName:\"order\" */ './components/order/Order.vue')\n// import Order from './components/order/Order.vue'\nconst Report = () => import(/* webpackChunkName:\"report\" */ './components/report/Report.vue')\n// import Report from './components/report/Report.vue'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("###10.项目上线\n####A.通过node创建服务器\n在vue_shop同级创建一个文件夹vue_shop_server存放node服务器\n使用终端打开vue_shop_server文件夹，输入命令 npm init -y\n初始化包之后，输入命令 npm i express -S\n打开vue_shop目录，复制dist文件夹，粘贴到vue_shop_server中\n在vue_shop_server文件夹中创建app.js文件,编写代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const express = require('express')\n\nconst app = express()\n\napp.use(express.static('./dist'))\n\napp.listen(8998,()=>{\n    console.log(\"server running at http://127.0.0.1:8998\")\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("然后再次在终端中输入  node app.js")]),s._v(" "),n("p",[s._v("####B.开启gzip压缩\n打开vue_shop_server文件夹的终端，输入命令：npm i compression -D\n打开app.js,编写代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const express = require('express')\n\nconst compression = require('compression')\n\nconst app = express()\n\napp.use(compression())\napp.use(express.static('./dist'))\n\napp.listen(8998,()=>{\n    console.log(\"server running at http://127.0.0.1:8998\")\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("####C.配置https服务\n配置https服务一般是后台进行处理，前端开发人员了解即可。\n首先，需要申请SSL证书，进入https://freessl.cn官网\n在后台导入证书，打开今天资料/素材，复制素材中的两个文件到vue_shop_server中\n打开app.js文件，编写代码导入证书，并开启https服务")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const express = require('express')\nconst compression = require('compression')\nconst https = require('https')\nconst fs = require('fs')\n\nconst app = express()\n//创建配置对象设置公钥和私钥\nconst options = {\n    cert:fs.readFileSync('./full_chain.pem'),\n    key:fs.readFileSync('./private.key')\n}\n\napp.use(compression())\napp.use(express.static('./dist'))\n\n// app.listen(8998,()=>{\n//     console.log(\"server running at http://127.0.0.1:8998\")\n// })\n\n//启动https服务\nhttps.createServer(options,app).listen(443)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("注意：因为我们使用的证书有问题，所以无法正常使用https服务")]),s._v(" "),n("p",[s._v("####D.使用pm2管理应用\n打开vue_shop_server文件夹的终端，输入命令：npm i pm2 -g\n使用pm2启动项目，在终端中输入命令：pm2 start app.js --name 自定义名称\n查看项目列表命令：pm2 ls\n重启项目：pm2 restart 自定义名称\n停止项目：pm2 stop 自定义名称\n删除项目：pm2 delete 自定义名称")])])}),[],!1,null,null,null);n.default=t.exports}}]);